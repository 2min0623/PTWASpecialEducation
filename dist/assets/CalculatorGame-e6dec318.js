import{l as N,r as D,o as l,c as o,a as s,t as c,F as b,j as p,i as _,b as f,w as C,f as U,s as g,m as A,p as F,e as G,_ as w}from"./index-84cea013.js";import{d as T}from"./vuedraggable.umd-b541afdd.js";import{G as I}from"./get_assets-400025f8.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";const P={name:"calculator",components:{draggable:T,clock:N(()=>w(()=>import("./clock-123c3037.js"),["assets/clock-123c3037.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/index-84cea013.js","assets/index-797b4968.css","assets/clock-4a6a2fba.css"]))},props:{GameData:{type:Object,required:!0},GameConfig:{type:Object,required:!0},id:{type:String,required:!0}},data(){return{Num:["0","1","2","3","4","5","6","7","8","9","10"],Symbol:["+","-"],Num_list:[],ButtonLine:[],Index:null,Index2:null,Sy_list:[],Ans:[],Carry:[],Carry2:[],Carryline:[],Carry2line:[],Title:[],NowUnit:2,ImgUrl:"",FakeData:{Unit:3,UseUnit:"Volume",Units:{Number:{Title:["個位","十位","百位","千位","萬位"],Total:5},Time:{Title:["秒",null,"分",null,"時",null,"日"],Total:4},Weight:{Title:["公克",null,null,"公斤",null,null,"公噸"],Total:4},Length:{Title:["毫米","公分",null,"公尺",null,null,"公里"],Total:4},Volume:{Title:["毫升",null,null,"公升",null,null,"公秉"],Total:3}}}}},mounted(){this.ImgUrl=I(this.id,this.GameData.QuestionArea.Image),this.FakeData.Unit=this.GameData.Unit;for(var e=0;e<this.FakeData.Unit;e++)this.Title.push(this.FakeData.Units[this.GameData.UseUnit].Title[e]);for(var e=0;e<=this.FakeData.Unit;e++)this.Carry.push([]),this.Carry2.push([]),this.Carryline.push([!1]),this.Carry2line.push([!1]),this.Ans.push([]);for(var t=0;t<this.NowUnit;t++){let n=[],h=[];this.Sy_list.push([]);for(var e=0;e<this.FakeData.Unit;e++)n.push([]),h.push([!1]);this.Num_list.push(n),this.ButtonLine.push(h)}for(var e in this.GameData.SymbolPreFix)for(var t=1;t<this.Sy_list.length;t++)this.Sy_list[t]=[this.GameData.SymbolPreFix[e]];for(var e in this.GameData.PreFix)for(var t=this.GameData.PreFix[e].length-1;t>=0;t--){let r=this.GameData.Unit-this.GameData.PreFix[e].length;this.Num_list[e][t+r]=[this.GameData.PreFix[e][t]]}console.log(this.Ans)},methods:{SetUnit:function(e){if(!(this.FakeData.Unit==8&&e==1)&&!(this.FakeData.Unit==2&&e==-1)){this.FakeData.Unit=this.FakeData.Unit+e,console.log(this.FakeData.Unit),this.Title=[],this.Num_list=[],this.ButtonLine=[],this.Sy_list=[],this.Carry=[],this.Carryline=[],this.Carry2line=[],this.Ans=[];for(var t=0;t<this.FakeData.Unit;t++)this.Title.push(this.FakeData.Units[this.FakeData.UseUnit].Title[t]);for(var t=0;t<=this.FakeData.Unit;t++)this.Carry.push([]),this.Carry2.push([]),this.Carryline.push([!1]),this.Carry2line.push([!1]),this.Ans.push([]);for(var n=0;n<this.NowUnit;n++){let h=[],r=[];this.Sy_list.push([]);for(var t=0;t<this.FakeData.Unit;t++)h.push([]),r.push([!1]);this.Num_list.push(h),this.ButtonLine.push(r)}for(var t in this.GameData.PreFix)for(var n=this.GameData.PreFix[t].length-1;n>=0;n--){let i=this.GameData.Unit-this.GameData.PreFix[t].length;this.Num_list[t][n+i]=[this.GameData.PreFix[t][n]]}}},UseUnit:function(e){this.FakeData.UseUnit=e,this.Title=[];for(var t=0;t<this.FakeData.Unit;t++)this.Title.push(this.FakeData.Units[this.FakeData.UseUnit].Title[t])},log:function(e){console.log(e),this.Num=["0","1","2","3","4","5","6","7","8","9"]},removerow:function(e){this.Num_list.length>1&&(this.Num_list.pop(),this.Sy_list.pop(),this.ButtonLine.pop())},GetIndex:function(e){this.Index=e},NumberCheckInput:function(){console.log(this.Index);for(var e in this.Num_list[this.Index])if(this.Num_list[this.Index][e].length>1){let t=this.Num_list[this.Index][e][1];this.Num_list[this.Index][e]=[t]}},CarryCheckInput:function(e){this.Carry[this.Index]=[`${e.oldIndex}`]},Carry2CheckInput:function(e){this.Carry2[this.Index]=[`${e.oldIndex}`]},AnsCheckInput:function(e){this.Ans[this.Index]=[`${e.oldIndex}`]},AddRow:function(){let e=[];this.NowUnit++,this.Sy_list.push([]);for(var t=0;t<this.FakeData.Unit;t++)e.push([]);this.Num_list.push(e),this.Num_list.length*(10**this.FakeData.Unit-1)>10**this.Ans.length&&(this.Ans.push([]),this.Carry.push([]),this.Carry2.push([]))},clear:function(e){this.Num_list=[],this.Sy_list=[],this.Carry=[],this.Carry2=[],this.Ans=[],this.Title=[];for(var t=0;t<this.FakeData.Unit;t++)this.Title.push(this.FakeData.Units[this.FakeData.UseUnit].Title[t]);for(var t=0;t<=this.FakeData.Unit;t++)this.Carry.push([]),this.Carry2.push([]),this.Ans.push([]);for(var n=0;n<2;n++){let h=[];for(var t=0;t<this.FakeData.Unit;t++)h.push([]);this.Num_list.push(h)}for(var t in this.GameData.PreFix)for(var n=this.GameData.PreFix[t].length-1;n>=0;n--){let i=this.GameData.Unit-this.GameData.PreFix[t].length;this.Num_list[t][n+i]=[this.GameData.PreFix[t][n]]}},sym_control:function(){this.Sy_list[0]=[];for(var e in this.Sy_list)this.Sy_list[e].length>1&&this.Sy_list[e].pop()},TurnToLine:function(e,t){e==0&&(this.ButtonLine[e][t][0]==!1?this.ButtonLine[e][t][0]=!0:this.ButtonLine[e][t][0]=!1)},CarryTurnToLine:function(e){this.Carryline[e][0]==!1?this.Carryline[e][0]=!0:this.Carryline[e][0]=!1},Carry2TurnToLine:function(e){this.Carry2line[e][0]==!1?this.Carry2line[e][0]=!0:this.Carry2line[e][0]=!1},CheckAnswer:function(){let e=!0,t=!1;if(this.GameData.Verification.Number){for(var n=0;n<this.Num_list.length;n++){let r="";for(var h=0;h<this.Num_list[n].length;h++)this.Num_list[n][h]==""&&t==!0||(r=r+this.Num_list[n][h],t=!0);if(console.log(r),console.log(this.GameData.Answer.Number_list[n]),console.log(r==this.GameData.Answer.Number_list[n]),console.log(this.GameData.Answer.Number_list[n]),this.GameData.Answer.Number_list[n]!=null&&this.temp!="")if(r==this.GameData.Answer.Number_list[n])e=!0;else{e=!1;break}else e=!1,console.warn("Calculation Game: Answer No Found, Please Check the Answer List is Correct")}console.log("Number Result: "+e)}if(t=!1,this.GameData.Verification.Answer){let r="";for(var n in this.Ans){if(console.log(this.Ans[n]),console.log(this.Ans[n][0]==null),t==!0&&this.Ans[n][0]==null){console.log("Answer is Empty"),e=!1,console.log("CAnswer Result: "+e);break}this.Ans[n][0]!=null&&(r=r+this.Ans[n],t=!0)}console.log(r),console.log(this.GameData.Answer.Answer),r===this.GameData.Answer.Answer||(e=!1),console.log("Answer Result: "+e)}e?(this.$emit("play-effect","CorrectSound"),this.$emit("next-question")):this.$emit("play-effect","WrongSound")}}},y=e=>(F("data-v-9fc2eca0"),e=e(),G(),e),L={class:"Container container"},x={class:"card CaluculatorBody"},B={class:"Calculator"},R={class:"unit"},V={class:"units"},q={key:0,type:"button",class:"btn btn-primary"},E={key:1,class:"space"},j={class:"Carry"},O={class:"Carrys"},W=["onClick"],Q={class:"Carry"},z={class:"Carrys"},H=["onClick"],J=y(()=>s("hr",null,null,-1)),K={class:"NumberArea"},M={class:"NumberRow"},X={type:"button",class:"btn btn-primary m-1 my-btn"},Y=y(()=>s("div",{class:"space"},null,-1)),Z={key:1,class:"space"},$={class:"NumbersContainer"},tt={class:"Number"},et=["onClick"],st=y(()=>s("hr",null,null,-1)),nt={class:"Answer"},it={class:"AnswerContainer"},at={type:"button",class:"btn btn-primary m-1 my-btn"},rt={class:"buttons"},lt={class:"card Selection"},ot={class:"row"},ut={class:"NumberPart"},ht=y(()=>s("h2",null,"數字",-1)),mt=y(()=>s("hr",null,null,-1)),ct={type:"button",class:"btn btn-primary m-1"},_t={class:"SymbolPart"},yt=y(()=>s("h2",null,"符號",-1)),dt=y(()=>s("hr",null,null,-1)),Ct={type:"button",class:"btn btn-primary m-1"},bt={key:0,class:"setting"},pt=y(()=>s("h2",null,"設定",-1)),ft=y(()=>s("hr",null,null,-1)),vt={key:0},gt={class:"unit"},kt={key:1},Ut={class:"UnitNumber d-flex"};function Nt(e,t,n,h,r,i){const d=D("draggable");return l(),o("div",null,[s("div",L,[s("div",x,[s("p",null,c(this.GameData.Question),1),s("div",B,[s("div",R,[(l(!0),o(b,null,p(r.Title,a=>(l(),o("div",V,[a!=null?(l(),o("button",q,c(a),1)):_("",!0),a==null?(l(),o("div",E)):_("",!0)]))),256))]),s("div",j,[(l(!0),o(b,null,p(r.Carry,(a,u)=>(l(),o("div",O,[f(d,{list:r.Carry[u],group:"Number","item-key":"name",class:"CarryContainer",onChange:m=>i.GetIndex(u),onAdd:i.CarryCheckInput,sort:!1},{item:C(({element:m})=>[s("button",{type:"button",class:g(["btn btn-primary m-1 my-btn",{ButtonLine:this.Carryline[u][0]}]),onClick:v=>i.CarryTurnToLine(u)},c(m),11,W)]),_:2},1032,["list","onChange","onAdd"])]))),256))]),s("div",Q,[(l(!0),o(b,null,p(r.Carry2,(a,u)=>(l(),o("div",z,[f(d,{list:r.Carry2[u],group:"Number","item-key":"name",class:"CarryContainer",onChange:m=>i.GetIndex(u),onAdd:i.Carry2CheckInput,sort:!1},{item:C(({element:m})=>[s("button",{type:"button",class:g(["btn btn-primary m-1 my-btn",{ButtonLine:this.Carry2line[u][0]}]),onClick:v=>i.Carry2TurnToLine(u)},c(m),11,H)]),_:2},1032,["list","onChange","onAdd"])]))),256))]),J,s("div",K,[(l(!0),o(b,null,p(r.Num_list,(a,u)=>(l(),o("div",M,[u!=0?(l(),A(d,{key:0,list:r.Sy_list[u],sort:!1,group:"Symbol","item-key":"name",onChange:m=>i.sym_control(u),class:"SymbolContainer"},{item:C(({element:m})=>[s("button",X,c(m),1)]),_:2},1032,["list","onChange"])):_("",!0),Y,a==null?(l(),o("div",Z)):_("",!0),s("div",$,[(l(!0),o(b,null,p(a,(m,v)=>(l(),o("div",tt,[f(d,{list:m,sort:!1,group:"Number","item-key":"name",class:"NumberConainer",onChange:k=>i.GetIndex(u),onAdd:i.NumberCheckInput},{item:C(({element:k})=>[s("button",{type:"button",class:g(["btn btn-primary m-1 my-btn",{ButtonLine:this.ButtonLine[u][v][0]}]),onClick:Dt=>i.TurnToLine(u,v)},c(k),11,et)]),_:2},1032,["list","onChange","onAdd"])]))),256))])]))),256))]),st,s("div",nt,[(l(!0),o(b,null,p(r.Ans,(a,u)=>(l(),o("div",it,[f(d,{list:a,sort:!1,group:"Number","item-key":"name",class:"NumberConainer",onChange:m=>i.GetIndex(u),onAdd:i.AnsCheckInput},{item:C(({element:m})=>[s("button",at,c(m),1)]),_:2},1032,["list","onChange","onAdd"])]))),256))])]),s("div",rt,[this.GameConfig.FunctionPermission.AddRow?(l(),o("button",{key:0,onClick:t[0]||(t[0]=(...a)=>i.AddRow&&i.AddRow(...a)),class:"btn btn-primary m-1"},"新增一行")):_("",!0),this.GameConfig.FunctionPermission.RemoveRow?(l(),o("button",{key:1,onClick:t[1]||(t[1]=(...a)=>i.removerow&&i.removerow(...a)),class:"btn btn-primary m-1"},"移除最後一行")):_("",!0),s("button",{onClick:t[2]||(t[2]=(...a)=>i.clear&&i.clear(...a)),class:"btn btn-primary m-1"},"清除所有數字"),s("button",{onClick:t[3]||(t[3]=(...a)=>i.CheckAnswer&&i.CheckAnswer(...a)),class:"btn btn-primary m-1"},"確認答案")])]),s("div",lt,[s("div",ot,[s("div",ut,[ht,mt,f(d,{class:"NumberContainer",list:r.Num,group:{name:"Number",pull:"clone",put:!1},sort:!1,onChange:i.log,"item-key":"Number"},{item:C(({element:a})=>[s("button",ct,c(a),1)]),_:1},8,["list","onChange"])]),s("div",_t,[yt,dt,f(d,{class:"SymbolContainer",list:r.Symbol,group:{name:"Symbol",pull:"clone",put:!1},onChange:i.log,sort:!1,"item-key":"index"},{item:C(({element:a})=>[s("button",Ct,c(a),1)]),_:1},8,["list","onChange"])]),this.GameConfig.FunctionPermission.CorrectUseUnit==!0||this.GameConfig.FunctionPermission.CorrectUnit==!0?(l(),o("div",bt,[pt,ft,this.GameConfig.FunctionPermission.CorrectUseUnit?(l(),o("div",vt,[U(" 單位: "),s("div",gt,[s("button",{type:"button",class:"btn btn-primary m-1",onClick:t[4]||(t[4]=a=>i.UseUnit("Number"))},"一般"),s("button",{type:"button",class:"btn btn-primary m-1",onClick:t[5]||(t[5]=a=>i.UseUnit("Volume"))},"容積"),s("button",{type:"button",class:"btn btn-primary m-1",onClick:t[6]||(t[6]=a=>i.UseUnit("Time"))},"時間"),s("button",{type:"button",class:"btn btn-primary m-1",onClick:t[7]||(t[7]=a=>i.UseUnit("Weight"))},"重量"),s("button",{type:"button",class:"btn btn-primary m-1",onClick:t[8]||(t[8]=a=>i.UseUnit("Length"))},"長度")])])):_("",!0),this.GameConfig.FunctionPermission.CorrectUnit?(l(),o("div",kt,[U(" 位數: "),s("div",Ut,[s("button",{type:"button",class:"btn btn-danger m-1 w-50",onClick:t[9]||(t[9]=a=>i.SetUnit(-1))},"-"),s("button",{type:"button",class:"btn btn-primary m-1 w-50",onClick:t[10]||(t[10]=a=>i.SetUnit(1))},"+")])])):_("",!0)])):_("",!0)])])])])}const Tt=S(P,[["render",Nt],["__scopeId","data-v-9fc2eca0"]]);export{Tt as default};
