import{q as A,r as N,o as r,c as o,a as s,t as _,j as c,F as C,k as p,b as f,w as b,f as D,s as U,u as G,m as g,p as F,e as T,_ as w}from"./index-4d742f7d.js";import{d as I}from"./vuedraggable.umd-57bd2e78.js";import{G as S}from"./get_assets-ed6c2078.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";const L={name:"calculator",components:{draggable:I,clock:A(()=>w(()=>import("./clock-d60d75a5.js"),["assets/clock-d60d75a5.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/index-4d742f7d.js","assets/index-797b4968.css","assets/clock-56a21981.css"]))},props:{GameData:{type:Object,required:!0},GameConfig:{type:Object,required:!0},id:{type:String,required:!0}},data(){return{Num:["0","1","2","3","4","5","6","7","8","9","10"],Symbol:["+","-"],Num_list:[],ButtonLine:[],Index:null,Index2:null,Sy_list:[],Ans:[],Carry:[],Carry2:[],Carryline:[],Carry2line:[],Title:[],NowUnit:2,ImgUrl:"",FakeData:{Unit:3,UseUnit:"Volume",Units:{Number:{Title:["個位","十位","百位","千位","萬位"],Total:5},Time:{Title:["秒",null,"分",null,"時",null,"日"],Total:4},Weight:{Title:["公克",null,null,"公斤",null,null,"公噸"],Total:4},Length:{Title:["毫米","公分",null,"公尺",null,null,"公里"],Total:4},Volume:{Title:["毫升",null,null,"公升",null,null,"公秉"],Total:3}}}}},mounted(){this.ImgUrl=S(this.id,this.GameData.QuestionArea.Image),this.FakeData.Unit=this.GameData.Unit;for(var e=0;e<this.FakeData.Unit;e++)this.Title.push(this.FakeData.Units[this.GameData.UseUnit].Title[e]);for(var e=0;e<=this.FakeData.Unit;e++)this.Carry.push([]),this.Carry2.push([]),this.Carryline.push([!1]),this.Carry2line.push([!1]),this.Ans.push([]);for(var t=0;t<this.NowUnit;t++){let n=[],h=[];this.Sy_list.push([]);for(var e=0;e<this.FakeData.Unit;e++)n.push([]),h.push([!1]);this.Num_list.push(n),this.ButtonLine.push(h)}for(var e in this.GameData.SymbolPreFix)for(var t=1;t<this.Sy_list.length;t++)this.Sy_list[t]=[this.GameData.SymbolPreFix[e]];for(var e in this.GameData.PreFix)for(var t=this.GameData.PreFix[e].length-1;t>=0;t--){let l=this.GameData.Unit-this.GameData.PreFix[e].length;this.Num_list[e][t+l]=[this.GameData.PreFix[e][t]]}console.log(this.Ans)},methods:{SetUnit:function(e){if(!(this.FakeData.Unit==8&&e==1)&&!(this.FakeData.Unit==2&&e==-1)){this.FakeData.Unit=this.FakeData.Unit+e,console.log(this.FakeData.Unit),this.Title=[],this.Num_list=[],this.ButtonLine=[],this.Sy_list=[],this.Carry=[],this.Carryline=[],this.Carry2line=[],this.Ans=[];for(var t=0;t<this.FakeData.Unit;t++)this.Title.push(this.FakeData.Units[this.FakeData.UseUnit].Title[t]);for(var t=0;t<=this.FakeData.Unit;t++)this.Carry.push([]),this.Carry2.push([]),this.Carryline.push([!1]),this.Carry2line.push([!1]),this.Ans.push([]);for(var n=0;n<this.NowUnit;n++){let h=[],l=[];this.Sy_list.push([]);for(var t=0;t<this.FakeData.Unit;t++)h.push([]),l.push([!1]);this.Num_list.push(h),this.ButtonLine.push(l)}for(var t in this.GameData.PreFix)for(var n=this.GameData.PreFix[t].length-1;n>=0;n--){let i=this.GameData.Unit-this.GameData.PreFix[t].length;this.Num_list[t][n+i]=[this.GameData.PreFix[t][n]]}}},UseUnit:function(e){this.FakeData.UseUnit=e,this.Title=[];for(var t=0;t<this.FakeData.Unit;t++)this.Title.push(this.FakeData.Units[this.FakeData.UseUnit].Title[t])},log:function(e){console.log(e),this.Num=["0","1","2","3","4","5","6","7","8","9"]},removerow:function(e){this.Num_list.length>1&&(this.Num_list.pop(),this.Sy_list.pop(),this.ButtonLine.pop())},GetIndex:function(e){this.Index=e},NumberCheckInput:function(){console.log(this.Index);for(var e in this.Num_list[this.Index])if(this.Num_list[this.Index][e].length>1){let t=this.Num_list[this.Index][e][1];this.Num_list[this.Index][e]=[t]}},CarryCheckInput:function(e){console.log(e),this.Carry[this.Index]=[`${e.oldIndex}`]},Carry2CheckInput:function(e){this.Carry2[this.Index]=[`${e.oldIndex}`]},AnsCheckInput:function(e){this.Ans[this.Index]=[`${e.oldIndex}`]},AddRow:function(){let e=[];this.NowUnit++,this.Sy_list.push([]);for(var t=0;t<this.FakeData.Unit;t++)e.push([]);this.Num_list.push(e),this.Num_list.length*(10**this.FakeData.Unit-1)>10**this.Ans.length&&(this.Ans.push([]),this.Carry.push([]),this.Carry2.push([]))},clear:function(e){this.Num_list=[],this.Sy_list=[],this.Carry=[],this.Carry2=[],this.Ans=[],this.Title=[];for(var t=0;t<this.FakeData.Unit;t++)this.Title.push(this.FakeData.Units[this.FakeData.UseUnit].Title[t]);for(var t=0;t<=this.FakeData.Unit;t++)this.Carry.push([]),this.Carry2.push([]),this.Ans.push([]);for(var n=0;n<2;n++){let h=[];for(var t=0;t<this.FakeData.Unit;t++)h.push([]);this.Num_list.push(h)}for(var t in this.GameData.PreFix)for(var n=this.GameData.PreFix[t].length-1;n>=0;n--){let i=this.GameData.Unit-this.GameData.PreFix[t].length;this.Num_list[t][n+i]=[this.GameData.PreFix[t][n]]}},sym_control:function(){this.Sy_list[0]=[];for(var e in this.Sy_list)this.Sy_list[e].length>1&&this.Sy_list[e].pop()},TurnToLine:function(e,t){e==0&&(this.ButtonLine[e][t][0]==!1?this.ButtonLine[e][t][0]=!0:this.ButtonLine[e][t][0]=!1)},CarryTurnToLine:function(e){this.Carryline[e][0]==!1?this.Carryline[e][0]=!0:this.Carryline[e][0]=!1},Carry2TurnToLine:function(e){this.Carry2line[e][0]==!1?this.Carry2line[e][0]=!0:this.Carry2line[e][0]=!1},CheckAnswer:function(){let e=!0,t=!1;if(this.GameData.Verification.Number){for(var n=0;n<this.Num_list.length;n++){let l="";for(var h=0;h<this.Num_list[n].length;h++)this.Num_list[n][h]==""&&t==!0||(l=l+this.Num_list[n][h],t=!0);if(console.log(l),console.log(this.GameData.Answer.Number_list[n]),console.log(l==this.GameData.Answer.Number_list[n]),console.log(this.GameData.Answer.Number_list[n]),this.GameData.Answer.Number_list[n]!=null&&this.temp!="")if(l==this.GameData.Answer.Number_list[n])e=!0;else{e=!1;break}else e=!1,console.warn("Calculation Game: Answer No Found, Please Check the Answer List is Correct")}console.log("Number Result: "+e)}if(t=!1,this.GameData.Verification.Answer){let l="";for(var n in this.Ans){if(console.log(this.Ans[n]),console.log(this.Ans[n][0]==null),t==!0&&this.Ans[n][0]==null){console.log("Answer is Empty"),e=!1,console.log("CAnswer Result: "+e);break}this.Ans[n][0]!=null&&(l=l+this.Ans[n],t=!0)}console.log(l),console.log(this.GameData.Answer.Answer),l===this.GameData.Answer.Answer||(e=!1),console.log("Answer Result: "+e)}e?(this.$emit("play-effect","CorrectSound"),this.$emit("next-question")):this.$emit("play-effect","WrongSound")}}},d=e=>(F("data-v-99bcf9c8"),e=e(),T(),e),x={class:"Container container"},B={key:0,class:"card QuestionArea"},R={class:"Title"},Q={key:0},V={class:"Description"},q={class:"Items"},E=["src"],j={class:"Container container"},O={class:"card CaluculatorBody"},W={class:"Calculator"},z={class:"unit"},H={class:"units"},J={key:0,type:"button",class:"btn btn-primary"},K={key:1,class:"space"},M={class:"Carry"},X={class:"Carrys"},Y=["onClick"],Z={class:"Carry"},$={class:"Carrys"},tt=["onClick"],et=d(()=>s("hr",null,null,-1)),st={class:"NumberArea"},nt={class:"NumberRow"},it={type:"button",class:"btn btn-primary m-1 my-btn"},at=d(()=>s("div",{class:"space"},null,-1)),rt={key:1,class:"space"},lt={class:"NumbersContainer"},ot={class:"Number"},ut=["onClick"],ht=d(()=>s("hr",null,null,-1)),mt={class:"Answer"},ct={class:"AnswerContainer"},_t={type:"button",class:"btn btn-primary m-1 my-btn"},dt={class:"buttons"},yt={class:"card Selection"},Ct={class:"row"},pt={class:"NumberPart"},bt=d(()=>s("h2",null,"數字",-1)),ft=d(()=>s("hr",null,null,-1)),vt={type:"button",class:"btn btn-primary m-1"},gt={class:"SymbolPart"},kt=d(()=>s("h2",null,"符號",-1)),Dt=d(()=>s("hr",null,null,-1)),Ut={type:"button",class:"btn btn-primary m-1"},At={key:0,class:"setting"},Nt=d(()=>s("h2",null,"設定",-1)),Gt=d(()=>s("hr",null,null,-1)),Ft={key:0},Tt={class:"unit"},wt={key:1},It={class:"UnitNumber d-flex"};function St(e,t,n,h,l,i){const y=N("draggable");return r(),o("div",null,[s("div",x,[this.GameData.QuestionArea?(r(),o("div",B,[s("p",R,_(this.GameData.QuestionArea.Title),1),this.GameData.QuestionArea.Title?(r(),o("hr",Q)):c("",!0),s("p",V,_(this.GameData.QuestionArea.Description),1),s("div",q,[this.GameData.QuestionArea.Image?(r(),o("img",{key:0,src:this.ImgUrl},null,8,E)):c("",!0),this.GameData.QuestionArea.SlotComponent?(r(!0),o(C,{key:1},p(this.GameData.QuestionArea.SlotComponent,(a,u)=>(r(),o("div",{class:"comp",key:u},[(r(),U(G(a.Name),{ID:this.id,Data:a.Data},null,8,["ID","Data"]))]))),128)):c("",!0)])])):c("",!0)]),s("div",j,[s("div",O,[s("p",null,_(this.GameData.Question),1),s("div",W,[s("div",z,[(r(!0),o(C,null,p(l.Title,a=>(r(),o("div",H,[a!=null?(r(),o("button",J,_(a),1)):c("",!0),a==null?(r(),o("div",K)):c("",!0)]))),256))]),s("div",M,[(r(!0),o(C,null,p(l.Carry,(a,u)=>(r(),o("div",X,[f(y,{list:l.Carry[u],group:"Number","item-key":"name",class:"CarryContainer",onChange:m=>i.GetIndex(u),onAdd:i.CarryCheckInput,sort:!1},{item:b(({element:m})=>[s("button",{type:"button",class:g(["btn btn-primary m-1 my-btn",{ButtonLine:this.Carryline[u][0]}]),onClick:v=>i.CarryTurnToLine(u)},_(m),11,Y)]),_:2},1032,["list","onChange","onAdd"])]))),256))]),s("div",Z,[(r(!0),o(C,null,p(l.Carry2,(a,u)=>(r(),o("div",$,[f(y,{list:l.Carry2[u],group:"Number","item-key":"name",class:"CarryContainer",onChange:m=>i.GetIndex(u),onAdd:i.Carry2CheckInput,sort:!1},{item:b(({element:m})=>[s("button",{type:"button",class:g(["btn btn-primary m-1 my-btn",{ButtonLine:this.Carry2line[u][0]}]),onClick:v=>i.Carry2TurnToLine(u)},_(m),11,tt)]),_:2},1032,["list","onChange","onAdd"])]))),256))]),et,s("div",st,[(r(!0),o(C,null,p(l.Num_list,(a,u)=>(r(),o("div",nt,[u!=0?(r(),U(y,{key:0,list:l.Sy_list[u],sort:!1,group:"Symbol","item-key":"name",onChange:m=>i.sym_control(u),class:"SymbolContainer"},{item:b(({element:m})=>[s("button",it,_(m),1)]),_:2},1032,["list","onChange"])):c("",!0),at,a==null?(r(),o("div",rt)):c("",!0),s("div",lt,[(r(!0),o(C,null,p(a,(m,v)=>(r(),o("div",ot,[f(y,{list:m,sort:!1,group:"Number","item-key":"name",class:"NumberConainer",onChange:k=>i.GetIndex(u),onAdd:i.NumberCheckInput},{item:b(({element:k})=>[s("button",{type:"button",class:g(["btn btn-primary m-1 my-btn",{ButtonLine:this.ButtonLine[u][v][0]}]),onClick:Pt=>i.TurnToLine(u,v)},_(k),11,ut)]),_:2},1032,["list","onChange","onAdd"])]))),256))])]))),256))]),ht,s("div",mt,[(r(!0),o(C,null,p(l.Ans,(a,u)=>(r(),o("div",ct,[f(y,{list:a,sort:!1,group:"Number","item-key":"name",class:"NumberConainer",onChange:m=>i.GetIndex(u),onAdd:i.AnsCheckInput},{item:b(({element:m})=>[s("button",_t,_(m),1)]),_:2},1032,["list","onChange","onAdd"])]))),256))])]),s("div",dt,[this.GameConfig.FunctionPermission.AddRow?(r(),o("button",{key:0,onClick:t[0]||(t[0]=(...a)=>i.AddRow&&i.AddRow(...a)),class:"btn btn-primary m-1"},"新增一行")):c("",!0),this.GameConfig.FunctionPermission.RemoveRow?(r(),o("button",{key:1,onClick:t[1]||(t[1]=(...a)=>i.removerow&&i.removerow(...a)),class:"btn btn-primary m-1"},"移除最後一行")):c("",!0),s("button",{onClick:t[2]||(t[2]=(...a)=>i.clear&&i.clear(...a)),class:"btn btn-primary m-1"},"清除所有數字"),s("button",{onClick:t[3]||(t[3]=(...a)=>i.CheckAnswer&&i.CheckAnswer(...a)),class:"btn btn-primary m-1"},"確認答案")])]),s("div",yt,[s("div",Ct,[s("div",pt,[bt,ft,f(y,{class:"NumberContainer",list:l.Num,group:{name:"Number",pull:"clone",put:!1},sort:!1,onChange:i.log,"item-key":"Number"},{item:b(({element:a})=>[s("button",vt,_(a),1)]),_:1},8,["list","onChange"])]),s("div",gt,[kt,Dt,f(y,{class:"SymbolContainer",list:l.Symbol,group:{name:"Symbol",pull:"clone",put:!1},onChange:i.log,sort:!1,"item-key":"index"},{item:b(({element:a})=>[s("button",Ut,_(a),1)]),_:1},8,["list","onChange"])]),this.GameConfig.FunctionPermission.CorrectUseUnit==!0||this.GameConfig.FunctionPermission.CorrectUnit==!0?(r(),o("div",At,[Nt,Gt,this.GameConfig.FunctionPermission.CorrectUseUnit?(r(),o("div",Ft,[D(" 單位: "),s("div",Tt,[s("button",{type:"button",class:"btn btn-primary m-1",onClick:t[4]||(t[4]=a=>i.UseUnit("Number"))},"一般"),s("button",{type:"button",class:"btn btn-primary m-1",onClick:t[5]||(t[5]=a=>i.UseUnit("Volume"))},"容積"),s("button",{type:"button",class:"btn btn-primary m-1",onClick:t[6]||(t[6]=a=>i.UseUnit("Time"))},"時間"),s("button",{type:"button",class:"btn btn-primary m-1",onClick:t[7]||(t[7]=a=>i.UseUnit("Weight"))},"重量"),s("button",{type:"button",class:"btn btn-primary m-1",onClick:t[8]||(t[8]=a=>i.UseUnit("Length"))},"長度")])])):c("",!0),this.GameConfig.FunctionPermission.CorrectUnit?(r(),o("div",wt,[D(" 位數: "),s("div",It,[s("button",{type:"button",class:"btn btn-danger m-1 w-50",onClick:t[9]||(t[9]=a=>i.SetUnit(-1))},"-"),s("button",{type:"button",class:"btn btn-primary m-1 w-50",onClick:t[10]||(t[10]=a=>i.SetUnit(1))},"+")])])):c("",!0)])):c("",!0)])])])])}const Qt=P(L,[["render",St],["__scopeId","data-v-99bcf9c8"]]);export{Qt as default};
